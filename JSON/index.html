<!DOCTYPE html>
<html lang="fi">

<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="UTF-8">
    <title>JSON-harjoitussivusto</title>

    <!--  Bootstrap CSS ja JS linkitys -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Lomakekenttien laitto vasemmalta tasan -->
    <style>
        label {
            display: block;
            width: 6em;
            float: left;
        }
    </style>
</head>


<body>
    <!-- Navikointipalkki -->
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
            <a class="navbar-brand" href="index.html">Navikointipalkki</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="index.html">Ensimmäinen tietue</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="toteutus.html">Toinen tietue</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="taulukko.html">Taulukko</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <h3>JSON-harjoitussivusto</h3>
    <div class="alert alert-info mt-4" role="alert">
        <div id="vastaus"></div>
    </div>

    <script>
        "use strict"
        fetch('tietue.JSON')
            .then(function (vastaus) {
                console.log(vastaus);
                return vastaus.json();
            })
            .then(function (vastausJSON) {
                kerro(vastausJSON);
            })
            .catch(function (virhe) {
                document.getElementById("vastaus").innerHTML = "<p>Tietojen hakeminen epäonnistui</p>";
            });
        function kerro(vastausJSON) {
            let vastaus = "<h1>" + vastausJSON.otsikko + "</h1><br> " +
                vastausJSON.kuvaus + "<br><hr>" +
                "<p><img src='" + vastausJSON.kuva + "'></p>" +
                "<h3>Opintojakso</h3>" +
                "Nimi: " + vastausJSON.opintojakso.nimi + "<br>" +
                "Tunnus: " + vastausJSON.opintojakso.tunnus + "<br>" +
                "Opintopisteet: " + vastausJSON.opintojakso.opintopisteet + "<br>";
            vastaus += "<p><h3>Aiheet</h3>";
            for (var i = 0; i < vastausJSON.tekniikat.length; i++) {
                vastaus += "<b>Aihe: " + vastausJSON.tekniikat[i] + "</b>";
                vastaus +=" <a href='" + vastausJSON.tekniikat[i].linkki + "'>" +
                    vastausJSON.tekniikat[i].nimi + "</a>" + "<br>";
            }
            vastaus += "</p>";

            document.getElementById("vastaus").innerHTML = vastaus;
        }
    </script>
</body>

</html>